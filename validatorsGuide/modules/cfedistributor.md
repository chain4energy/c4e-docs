<!--
παραγγελία: 2
-->


# Cfedistributor

## Αφηρημένη

Η μονάδα διανομέα Chain4Energy παρέχει λειτουργικότητα του μηχανισμού διανομής κουπονιών.
Ο μηχανισμός διανομής διακριτικών στέλνει μάρκες από λογαριασμούς πηγής σε λογαριασμούς προορισμού σύμφωνα με τη διαμόρφωση.

## Περιεχόμενα

1. **[Έννοια](#έννοιες)**
2. **[Params](#parameters)**
3. **[Κατάσταση](#state)**
4. **[Εκδηλώσεις](#events)**
5. **[Queries](#queries)**
6. **[Αμετάβλητα](#Invariants)**
7. **[Επικυρώσεις Genesis](#genesis-validations)**

## Έννοιες

Ο σκοπός της ενότητας «cfedistributor» είναι να παρέχει λειτουργικότητα ευέλικτου μηχανισμού διανομής διακριτικών.

### Μηχανισμός διανομής διακριτικών

Ο μηχανισμός διανομής διακριτικών βασίζεται στη λίστα των διαμορφωμένων υποδιανομέων.
Ο μηχανισμός διανομής διακριτικών επαναλαμβάνεται μέσω όλων των υποδιανομέων με προκαθορισμένη σειρά και εκτελεί κάθε υποδιανομέα ανά μπλοκ.

### Υποδιανομέας

Ο υποδιανομέας είναι υπεύθυνος για την αποστολή νομισμάτων από τους λογαριασμούς πηγής του στους λογαριασμούς προορισμού του ή για την καύση κουπονιών ανάλογα με το διαμορφωμένο ποσοστό μεριδίου.

Δείτε τη γραφική παράσταση του υποδιανομέα.

![Υποδιανομέας](./images/subdistributor.svg?raw=1)

Οι υποδιανομείς εκτελούνται με προκαθορισμένη σειρά, έτσι ώστε οι προορισμοί ενός υποδιανομέα να μπορούν να γίνουν πηγές ενός άλλου υποδιανομέα.

#### Πηγές και προορισμοί υποδιανομέα

Ο υποδιανομέας υποστηρίζει διάφορους τύπους πηγών:
* Λογαριασμός κύριας μονάδας
* βασικός λογαριασμός
* λογαριασμός ενότητας
* εσωτερικός λογαριασμός

Ο υποδιανομέας υποστηρίζει διάφορους τύπους προορισμών:
* Λογαριασμός κύριας μονάδας
* βασικός λογαριασμός
* λογαριασμός ενότητας
* εσωτερικός λογαριασμός
* Κάψιμο προορισμό

που:
* Λογαριασμός κύριας μονάδας - Λογαριασμός μονάδας διανομέα Chain4Energy.
   Ορισμένες άλλες μονάδες μπορούν να στείλουν διακριτικά απευθείας στη μονάδα διανομέα Chain4Energy.
   Απαιτείται να οριστεί ένας υποδιανομέας όπου ο κύριος λογαριασμός λειτουργικής μονάδας είναι η πηγή για να αποτραπεί η συσσώρευση διακριτικών.
* Βασικός λογαριασμός - Ο λογαριασμός Standard Cosmos SDK διαμορφώθηκε ως διεύθυνση λογαριασμού.
* Λογαριασμός μονάδας - Ο λογαριασμός λειτουργικής μονάδας Cosmos SDK έχει διαμορφωθεί ως όνομα λογαριασμού λειτουργικής μονάδας.
* Εσωτερικός λογαριασμός - βοηθητικός εικονικός λογαριασμός εσωτερικός στη μονάδα διανομέα Chain4Energy. Χρήσιμο σε περίπτωση σχεδιασμού πιο περίπλοκης ροής συμβολαίων.
* Burn προορισμός - tokens burner.

#### Παράδειγμα

Ας εξετάσουμε ένα παράδειγμα διανομής διακριτικών. Στο παράδειγμά μας έχουμε τις ακόλουθες πηγές συμβολικών:
* πληθωρισμός
* τέλη συναλλαγής
* ορισμένες χρεώσεις λειτουργικότητας της μονάδας. Η φανταστική μας ενότητα παρέχει κάποια λειτουργικότητα για την οποία
   Ο χρήστης καλείται να πληρώσει κάποιο τέλος και μέρος αυτού του τέλους μοιράζεται με το blockchain.

Κατανομή πληθωρισμού:
* 60% στη μονάδα διανομής για τυπική λειτουργικότητα επιβράβευσης επικυρωτών
* 5% στο Ταμείο Ανάπτυξης
* 35% για ενισχυτικές ομάδες κινήτρων

Κατανομή προμηθειών συναλλαγής:
* 80% στη μονάδα διανομής για τυπική λειτουργικότητα επιβράβευσης επικυρωτών
* 5% να καεί
* 15% για ενισχυτικές ομάδες κινήτρων

Κατανομή τελών λειτουργικότητας φανταστικής ενότητας:
* 50% στη μονάδα διανομής για τυπική λειτουργικότητα επιβράβευσης επικυρωτών
* 30% στο Ταμείο Ανάπτυξης
* 20% σε ενισχυτικές ομάδες κινήτρων

Έχουμε επίσης την ακόλουθη διανομή ενισχυτικών ομάδων κινήτρων:
* 65% στην ομάδα ενίσχυσης διακυβέρνησης
* 35% για ενισχυτική πισίνα το Σαββατοκύριακο

Δείτε τη γραφική αναπαράσταση αυτής της διανομής.

![ExampleDistribution](./images/example-distribution.svg?raw=1)

Ας υποθέσουμε επίσης ότι:
* Ο πληθωρισμός κόβεται απευθείας στο λογαριασμό της μονάδας cfedistributor
* Η ενότητα διανομής του cosmos sdk ανακτά διακριτικά από τον λογαριασμό λειτουργικής μονάδας που ονομάζεται "validators_rewards"
* Το ταμείο ανάπτυξης είναι βασικός λογαριασμός με διεύθυνση "c4edwijhdhwqu43efvc3543ec34c2erc342dw"
* Η ομάδα ενίσχυσης διακυβέρνησης είναι λογαριασμός λειτουργικής μονάδας που ονομάζεται "governance_booster"
* Το σαββατοκύριακο booster pool είναι ο λογαριασμός ενότητας με το όνομα "weekend_booster"
* οι χρεώσεις της φανταστικής ενότητας αποθηκεύονται στον λογαριασμό της ενότητας με το όνομα "fictional_module_fee_collector"

Στη συνέχεια, μπορούμε να μοντελοποιήσουμε τη ροή διανομής μας με τους ακόλουθους υποδιανομείς:
* υποδιανομέας πληθωρισμού

![inflation subdistributor](./images/example-inflation-subdistributor.svg?raw=1)

* υποδιανομέας τελών συναλλαγής

![υποδιανομέας χρεώσεων συναλλαγών](./images/example-tx-fees-subdistributor.svg?raw=1)

* υποδιανομέας τελών ενότητας

![module fees subdistributor](./images/example-module-fees-subdistributor.svg?raw=1)

* υποδιανομέας ενισχυτών κινήτρων

![incentive boosters subdistributor](./images/example-boosters-subdistributor.svg?raw=1)

## Παράμετροι

Η μονάδα διανομής Chain4Energy περιέχει τις ακόλουθες παραμέτρους διαμόρφωσης:

| Κλειδί | Τύπος | Περιγραφή |
|------------------------------------------------- -------|----------------------------------|
| υπο_διανομείς | Λίστα τύπου υποδιανομέα | κατάλογος καθορισμένων υποδιανομέων |

### Τύπος υποδιανομέα

| Param | Τύπος | Περιγραφή |
|--------------|----------------------|----------- ------------------------|
| όνομα | χορδή | μοναδικό όνομα του υποδιανομέα |
| πηγές | Κατάλογος Ac τύπος καταμέτρησης | λίστα λογαριασμών πηγής |
| προορισμοί | Τύπος προορισμών | ορισμός προορισμών |

### Τύπος προορισμών

| Param | Τύπος | Περιγραφή |
|---------------|------------------------------|- -------------------------------------------------- --------------------------|
| κύρια_μερίδιο | Τύπος λογαριασμού | κύριος προορισμός - όλα τα εναπομείναντα διακριτικά από άλλες κοινές χρήσεις αποστέλλονται εδώ |
| burn_share | Τύπος sdk.Dec | μοιράσου για καύση (0-1) |
| μετοχές | Λίστα τύπου DestinationShare | Λίστα λογαριασμών προορισμού με ποσοστό μεριδίου |

### Τύπος Shared Destination

| Param | Τύπος | Περιγραφή |
|-------------|------------------------------------ --------|
| όνομα | χορδή | μοναδικό όνομα της μετοχής |
| προορισμός | Τύπος λογαριασμού | λογαριασμός προορισμού |
| μετοχή | sdk.Δεκ. | ποσοστό μετοχής (0-1) |

### Τύπος Λογαριασμού

| Param | Τύπος | Περιγραφή |
|-----------|---------------|--------------------- -------------------------------------------------- -------------------------------------------------- -------------------------------------------------- --------------------------------------------|
| τύπος | συμβολοσειρά enum | τύπος λογαριασμού:<br />- MAIN - λογαριασμός κύριας μονάδας<br />- MODULE_ACCOUNT - λογαριασμός λειτουργικής μονάδας<br />- BASE_ACCOUNT - βασικός λογαριασμός<br />- INTERNAL_ACCOUNT - εσωτερικός λογαριασμός cfedistributor |
| id | χορδή | αναγνωριστικό λογαριασμού εξαρτάται από τον τύπο::<br />- MAIN - κενό<br />- MODULE_ACCOUNT - όνομα λογαριασμού λειτουργικής μονάδας<br />- BASE_ACCOUNT - διεύθυνση λογαριασμού βάσης<br />- INTERNAL_ACCOUNT - εσωτερικό όνομα λογαριασμού cfedistributor |

### Παραδείγματα παραμέτρων

Δείτε τις παραμέτρους διαμόρφωσης για **[example](#example)** από την ενότητα **[Concept](#concepts)**

```json

{
     "sub_distributors": [
         {
             "name": "inflation_subdistributor",
             "πηγές": [
                 {
                 "id": "",
                 "type": "MAIN"
                 }
             ],
             "προορισμοί": {
                 "primary_share": {
                     "id": "validators_rewards",
                     "type": "MODULE_ACCOUNT"
                 },
                 "μερίδια": [
                     {
                         "προορισμός": {
                             "id": "c4edwijhdhwqu43efvc3543ec34c2erc342dw",
                             "type": "BASE_ACCOUNT"
                         },
                         "όνομα": "inflation_development_fund_share",
                         "μερίδιο": "0,05"
                     },
                     {
                         "προορισμός": {
                             "id": "incentive_boosters",
                             "type": "INTERNAL_ACCOUNT"
                         },
                         "name": "inflation_incentive_boosters_share",
                         "μερίδιο": "0,35"
                     }
                 ],
                 "burn_share": "0.0"
             }
         },
         {
             "όνομα": "υποδιανομέας χρεώσεων συναλλαγών",
             "πηγές": [
                 {
                 "id": "fee_collector",
                 "type": "MODULE_ACCOUNT"
                 }
             ],
             "προορισμοί": {
                 "primary_share": {
                     "id": "validators_rewards",
                     "type": "MODULE_ACCOUNT"
                 },
                 "μερίδια": [
                     {
                         "προορισμός": {
                             "id": "incentive_boosters",
                             "type": "INTERNAL_ACCOUNT"
                         },
                         "name": "txs_incentive_boosters_share",
                         "μερίδιο": "0,15"
                     }
                 ],
                 "burn_share": "0,05"
             }
         },
         {
             "name": "module_fees_subdistributor",
             "πηγές": [
                 {
                 "id": "fictional_module_fee_collector",
                 "type": "MODULE_ACCOUNT"
                 }
             ],
             "προορισμοί": {
                 "primary_share": {
                     "id": "validators_rewards",
                     "type": "MODULE_ACCOUNT"
                 },
                 "μερίδια": [
                     {
                         "προορισμός": {
                             "id": "c4edwijhdhwqu43efvc3543ec34c2erc342dw",
                             "type": "BASE_ACCOUNT"
                         },
                         "όνομα": "module_development_fund_share",
